// eslint-disable-next-line no-promise-executor-return
exports.sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

exports.extractContextFromUrl = (url) => {
  const [_, part2] = url.split('//');
  if (!part2.includes('.')) return part2;
  const parts = part2.split('.');
  let context = '';
  for (let idx = 0; idx < parts.length - 1; idx += 1) {
    context += idx < parts.length - 2 ? `${parts[idx]}.` : `${parts[idx]}`;
  }
  return context;
};

exports.formatDate = (date) => {
  const d = new Date(date);
  let month = `${d.getMonth() + 1}`;
  let day = `${d.getDate()}`;
  const year = d.getFullYear();

  if (month.length < 2) { month = `0${month}`; }
  if (day.length < 2) { day = `0${day}`; }

  return [year, month, day].join('-');
};

exports.extractDateFromTimeStamp = (date) => {
  const ndate = new Date(date.toString());
  return this.formatDate(ndate);
};
