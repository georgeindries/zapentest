const bcrypt = require('bcryptjs');
const { getUserByEmail, saveUser } = require('../database/queries/auth');

exports.getUserByEmail = async (userEmail) => getUserByEmail(userEmail)
  .then((resObj) => resObj)
  .catch((err) => {
    throw err;
  });

exports.registerUser = async (email, password, name) => {
  const salt = await bcrypt.genSalt(10);
  console.log(salt);
  const hashedPassword = await bcrypt.hash(password, salt);
  console.log(hashedPassword);
  return saveUser(email, hashedPassword, name)
    .then((resObj) => resObj)
    .catch((err) => {
      throw err;
    });
};
